"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ethereumjs+wallet@2.0.4";
exports.ids = ["vendor-chunks/@ethereumjs+wallet@2.0.4"];
exports.modules = {

/***/ "(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/hdkey.js":
/*!**************************************************************************************************************!*\
  !*** ../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/hdkey.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EthereumHDKey: () => (/* binding */ EthereumHDKey)\n/* harmony export */ });\n/* harmony import */ var ethereum_cryptography_bip39_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ethereum-cryptography/bip39/index.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/bip39/index.js\");\n/* harmony import */ var ethereum_cryptography_hdkey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethereum-cryptography/hdkey.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/hdkey.js\");\n/* harmony import */ var _wallet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wallet.js */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js\");\n\n\n\nclass EthereumHDKey {\n    constructor(_hdkey) {\n        this._hdkey = _hdkey;\n    }\n    /**\n     * Creates an instance based on a seed.\n     */\n    static fromMasterSeed(seedBuffer) {\n        return new EthereumHDKey(ethereum_cryptography_hdkey_js__WEBPACK_IMPORTED_MODULE_1__.HDKey.fromMasterSeed(seedBuffer));\n    }\n    /**\n     * Creates an instance based on BIP39 mnemonic phrases\n     */\n    static fromMnemonic(mnemonic, passphrase) {\n        return EthereumHDKey.fromMasterSeed((0,ethereum_cryptography_bip39_index_js__WEBPACK_IMPORTED_MODULE_0__.mnemonicToSeedSync)(mnemonic, passphrase));\n    }\n    /**\n     * Create an instance based on a BIP32 extended private or public key.\n     */\n    static fromExtendedKey(base58Key) {\n        return new EthereumHDKey(ethereum_cryptography_hdkey_js__WEBPACK_IMPORTED_MODULE_1__.HDKey.fromExtendedKey(base58Key));\n    }\n    /**\n     * Returns a BIP32 extended private key (xprv)\n     */\n    privateExtendedKey() {\n        if (!this._hdkey.privateExtendedKey) {\n            throw new Error('This is a public key only wallet');\n        }\n        return this._hdkey.privateExtendedKey;\n    }\n    /**\n     * Return a BIP32 extended public key (xpub)\n     */\n    publicExtendedKey() {\n        return this._hdkey.publicExtendedKey;\n    }\n    /**\n     * Derives a node based on a path (e.g. m/44'/0'/0/1)\n     */\n    derivePath(path) {\n        return new EthereumHDKey(this._hdkey.derive(path));\n    }\n    /**\n     * Derive a node based on a child index\n     */\n    deriveChild(index) {\n        return new EthereumHDKey(this._hdkey.deriveChild(index));\n    }\n    /**\n     * Return a `Wallet` instance as seen above\n     */\n    getWallet() {\n        if (this._hdkey.privateKey) {\n            return _wallet_js__WEBPACK_IMPORTED_MODULE_2__.Wallet.fromPrivateKey(this._hdkey.privateKey);\n        }\n        if (!this._hdkey.publicKey)\n            throw new Error('No hdkey');\n        return _wallet_js__WEBPACK_IMPORTED_MODULE_2__.Wallet.fromPublicKey(this._hdkey.publicKey, true);\n    }\n}\n//# sourceMappingURL=hdkey.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcmV1bWpzK3dhbGxldEAyLjAuNC9ub2RlX21vZHVsZXMvQGV0aGVyZXVtanMvd2FsbGV0L2Rpc3QvZXNtL2hka2V5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEU7QUFDbkI7QUFDbEI7QUFDOUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpRUFBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHdGQUFrQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlFQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4Q0FBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhDQUFNO0FBQ3JCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BleGFtcGxlcy9sb2dpbi13aXRoLXBhc3Nwb3J0LXByb3ZpZGVyLWFubm91bmNlLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AZXRoZXJldW1qcyt3YWxsZXRAMi4wLjQvbm9kZV9tb2R1bGVzL0BldGhlcmV1bWpzL3dhbGxldC9kaXN0L2VzbS9oZGtleS5qcz9mYTExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1uZW1vbmljVG9TZWVkU3luYyB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9iaXAzOS9pbmRleC5qcyc7XG5pbXBvcnQgeyBIREtleSB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9oZGtleS5qcyc7XG5pbXBvcnQgeyBXYWxsZXQgfSBmcm9tICcuL3dhbGxldC5qcyc7XG5leHBvcnQgY2xhc3MgRXRoZXJldW1IREtleSB7XG4gICAgY29uc3RydWN0b3IoX2hka2V5KSB7XG4gICAgICAgIHRoaXMuX2hka2V5ID0gX2hka2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIGJhc2VkIG9uIGEgc2VlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU1hc3RlclNlZWQoc2VlZEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gbmV3IEV0aGVyZXVtSERLZXkoSERLZXkuZnJvbU1hc3RlclNlZWQoc2VlZEJ1ZmZlcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIGJhc2VkIG9uIEJJUDM5IG1uZW1vbmljIHBocmFzZXNcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU1uZW1vbmljKG1uZW1vbmljLCBwYXNzcGhyYXNlKSB7XG4gICAgICAgIHJldHVybiBFdGhlcmV1bUhES2V5LmZyb21NYXN0ZXJTZWVkKG1uZW1vbmljVG9TZWVkU3luYyhtbmVtb25pYywgcGFzc3BocmFzZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2UgYmFzZWQgb24gYSBCSVAzMiBleHRlbmRlZCBwcml2YXRlIG9yIHB1YmxpYyBrZXkuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FeHRlbmRlZEtleShiYXNlNThLZXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFdGhlcmV1bUhES2V5KEhES2V5LmZyb21FeHRlbmRlZEtleShiYXNlNThLZXkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEJJUDMyIGV4dGVuZGVkIHByaXZhdGUga2V5ICh4cHJ2KVxuICAgICAqL1xuICAgIHByaXZhdGVFeHRlbmRlZEtleSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9oZGtleS5wcml2YXRlRXh0ZW5kZWRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBpcyBhIHB1YmxpYyBrZXkgb25seSB3YWxsZXQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5faGRrZXkucHJpdmF0ZUV4dGVuZGVkS2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBCSVAzMiBleHRlbmRlZCBwdWJsaWMga2V5ICh4cHViKVxuICAgICAqL1xuICAgIHB1YmxpY0V4dGVuZGVkS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGRrZXkucHVibGljRXh0ZW5kZWRLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlcml2ZXMgYSBub2RlIGJhc2VkIG9uIGEgcGF0aCAoZS5nLiBtLzQ0Jy8wJy8wLzEpXG4gICAgICovXG4gICAgZGVyaXZlUGF0aChwYXRoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXRoZXJldW1IREtleSh0aGlzLl9oZGtleS5kZXJpdmUocGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXJpdmUgYSBub2RlIGJhc2VkIG9uIGEgY2hpbGQgaW5kZXhcbiAgICAgKi9cbiAgICBkZXJpdmVDaGlsZChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IEV0aGVyZXVtSERLZXkodGhpcy5faGRrZXkuZGVyaXZlQ2hpbGQoaW5kZXgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgYFdhbGxldGAgaW5zdGFuY2UgYXMgc2VlbiBhYm92ZVxuICAgICAqL1xuICAgIGdldFdhbGxldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hka2V5LnByaXZhdGVLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBXYWxsZXQuZnJvbVByaXZhdGVLZXkodGhpcy5faGRrZXkucHJpdmF0ZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9oZGtleS5wdWJsaWNLZXkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGhka2V5Jyk7XG4gICAgICAgIHJldHVybiBXYWxsZXQuZnJvbVB1YmxpY0tleSh0aGlzLl9oZGtleS5wdWJsaWNLZXksIHRydWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhka2V5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/hdkey.js\n");

/***/ }),

/***/ "(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/index.js":
/*!**************************************************************************************************************!*\
  !*** ../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/index.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Wallet: () => (/* reexport safe */ _wallet_js__WEBPACK_IMPORTED_MODULE_2__.Wallet),\n/* harmony export */   hdkey: () => (/* reexport module object */ _hdkey_js__WEBPACK_IMPORTED_MODULE_0__),\n/* harmony export */   thirdparty: () => (/* reexport module object */ _thirdparty_js__WEBPACK_IMPORTED_MODULE_1__)\n/* harmony export */ });\n/* harmony import */ var _hdkey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hdkey.js */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/hdkey.js\");\n/* harmony import */ var _thirdparty_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./thirdparty.js */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/thirdparty.js\");\n/* harmony import */ var _wallet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wallet.js */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js\");\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcmV1bWpzK3dhbGxldEAyLjAuNC9ub2RlX21vZHVsZXMvQGV0aGVyZXVtanMvd2FsbGV0L2Rpc3QvZXNtL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvQztBQUNVO0FBQ2xCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGV4YW1wbGVzL2xvZ2luLXdpdGgtcGFzc3BvcnQtcHJvdmlkZXItYW5ub3VuY2UvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcmV1bWpzK3dhbGxldEAyLjAuNC9ub2RlX21vZHVsZXMvQGV0aGVyZXVtanMvd2FsbGV0L2Rpc3QvZXNtL2luZGV4LmpzPzkxNWUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogYXMgaGRrZXkgZnJvbSAnLi9oZGtleS5qcyc7XG5leHBvcnQgKiBhcyB0aGlyZHBhcnR5IGZyb20gJy4vdGhpcmRwYXJ0eS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3dhbGxldC5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/index.js\n");

/***/ }),

/***/ "(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/thirdparty.js":
/*!*******************************************************************************************************************!*\
  !*** ../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/thirdparty.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Thirdparty: () => (/* binding */ Thirdparty),\n/* harmony export */   fromEtherCamp: () => (/* binding */ fromEtherCamp),\n/* harmony export */   fromEtherWallet: () => (/* binding */ fromEtherWallet),\n/* harmony export */   fromQuorumWallet: () => (/* binding */ fromQuorumWallet)\n/* harmony export */ });\n/* harmony import */ var _ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethereumjs/util */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+util@9.1.0/node_modules/@ethereumjs/util/dist/esm/index.js\");\n/* harmony import */ var _scure_base__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @scure/base */ \"(ssr)/../../../node_modules/.pnpm/@scure+base@1.1.7/node_modules/@scure/base/lib/esm/index.js\");\n/* harmony import */ var ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethereum-cryptography/aes.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/aes.js\");\n/* harmony import */ var ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethereum-cryptography/keccak.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/keccak.js\");\n/* harmony import */ var ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethereum-cryptography/pbkdf2.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/pbkdf2.js\");\n/* harmony import */ var js_md5__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js-md5 */ \"(ssr)/../../../node_modules/.pnpm/js-md5@0.8.3/node_modules/js-md5/src/md5.js\");\n/* harmony import */ var _wallet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./wallet.js */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js\");\n\n\n\n\n\n\n\nconst evpKdfDefaults = {\n    count: 1,\n    keysize: 16,\n    ivsize: 16,\n    digest: 'md5',\n};\nfunction mergeEvpKdfOptsWithDefaults(opts) {\n    if (!opts) {\n        return evpKdfDefaults;\n    }\n    return {\n        count: opts.count ?? evpKdfDefaults.count,\n        keysize: opts.keysize ?? evpKdfDefaults.keysize,\n        ivsize: opts.ivsize ?? evpKdfDefaults.ivsize,\n        digest: opts.digest ?? evpKdfDefaults.digest,\n    };\n}\n/*\n * opts:\n * - digest - digest algorithm, defaults to md5\n * - count - hash iterations\n * - keysize - desired key size\n * - ivsize - desired IV size\n *\n * Algorithm form https://www.openssl.org/docs/manmaster/crypto/EVP_BytesToKey.html\n *\n * FIXME: not optimised at all\n */\nfunction evp_kdf(data, salt, opts) {\n    const params = mergeEvpKdfOptsWithDefaults(opts);\n    // A single EVP iteration, returns `D_i`, where block equlas to `D_(i-1)`\n    function iter(block) {\n        if (params.digest !== 'md5')\n            throw new Error('Only md5 is supported in evp_kdf');\n        let hash = js_md5__WEBPACK_IMPORTED_MODULE_4__.md5.create();\n        hash.update(block);\n        hash.update(data);\n        hash.update(salt);\n        block = Uint8Array.from(hash.array());\n        for (let i = 1, len = params.count; i < len; i++) {\n            hash = js_md5__WEBPACK_IMPORTED_MODULE_4__.md5.create();\n            hash.update(block);\n            block = new Uint8Array(hash.arrayBuffer());\n        }\n        return block;\n    }\n    const ret = [];\n    let i = 0;\n    while ((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.concatBytes)(...ret).length < params.keysize + params.ivsize) {\n        ret[i] = iter(i === 0 ? new Uint8Array() : ret[i - 1]);\n        i++;\n    }\n    const tmp = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.concatBytes)(...ret);\n    return {\n        key: tmp.subarray(0, params.keysize),\n        iv: tmp.subarray(params.keysize, params.keysize + params.ivsize),\n    };\n}\n// http://stackoverflow.com/questions/25288311/cryptojs-aes-pattern-always-ends-with\nfunction decodeCryptojsSalt(input) {\n    const ciphertext = _scure_base__WEBPACK_IMPORTED_MODULE_6__.base64.decode(input);\n    if ((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUtf8)(ciphertext.subarray(0, 8)) === 'Salted__') {\n        return {\n            salt: ciphertext.subarray(8, 16),\n            ciphertext: ciphertext.subarray(16),\n        };\n    }\n    return { ciphertext };\n}\n/*\n * Third Party API: Import a wallet generated by EtherWallet\n * This wallet format is created by https://github.com/SilentCicero/ethereumjs-accounts\n * and used on https://www.myetherwallet.com/\n */\nasync function fromEtherWallet(input, password) {\n    const json = typeof input === 'object' ? input : JSON.parse(input);\n    let privateKey;\n    if (!json.locked) {\n        if (json.private.length !== 64) {\n            throw new Error('Invalid private key length');\n        }\n        privateKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.private);\n    }\n    else {\n        if (typeof password !== 'string') {\n            throw new Error('Password required');\n        }\n        if (password.length < 7) {\n            throw new Error('Password must be at least 7 characters');\n        }\n        // the \"encrypted\" version has the low 4 bytes\n        // of the hash of the address appended\n        const hash = json.encrypted ? json.private.slice(0, 128) : json.private;\n        // decode openssl ciphertext + salt encoding\n        const cipher = decodeCryptojsSalt(hash);\n        if (!cipher.salt) {\n            throw new Error('Unsupported EtherWallet key format');\n        }\n        // derive key/iv using OpenSSL EVP as implemented in CryptoJS\n        const evp = evp_kdf((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), cipher.salt, { keysize: 32, ivsize: 16 });\n        const pr = await (0,ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__.decrypt)(cipher.ciphertext, evp.key, evp.iv, 'aes-256-cbc');\n        // NOTE: yes, they've run it through UTF8\n        privateKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUtf8)(pr));\n    }\n    const wallet = new _wallet_js__WEBPACK_IMPORTED_MODULE_5__.Wallet(privateKey);\n    if (wallet.getAddressString() !== json.address) {\n        throw new Error('Invalid private key or address');\n    }\n    return wallet;\n}\n/**\n * Third Party API: Import a brain wallet used by Ether.Camp\n */\nfunction fromEtherCamp(passphrase) {\n    return new _wallet_js__WEBPACK_IMPORTED_MODULE_5__.Wallet((0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(passphrase)));\n}\n/**\n * Third Party API: Import a brain wallet used by Quorum Wallet\n */\nfunction fromQuorumWallet(passphrase, userid) {\n    if (passphrase.length < 10) {\n        throw new Error('Passphrase must be at least 10 characters');\n    }\n    if (userid.length < 10) {\n        throw new Error('User id must be at least 10 characters');\n    }\n    const merged = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(passphrase + userid);\n    const seed = (0,ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__.pbkdf2Sync)(merged, merged, 2000, 32, 'sha256');\n    return new _wallet_js__WEBPACK_IMPORTED_MODULE_5__.Wallet(seed);\n}\nconst Thirdparty = {\n    fromEtherWallet,\n    fromEtherCamp,\n    fromQuorumWallet,\n};\n//# sourceMappingURL=thirdparty.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcmV1bWpzK3dhbGxldEAyLjAuNC9ub2RlX21vZHVsZXMvQGV0aGVyZXVtanMvd2FsbGV0L2Rpc3QvZXNtL3RoaXJkcGFydHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDMUQ7QUFDa0I7QUFDSztBQUNDO0FBQ2hDO0FBQ1E7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUNBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRCxtQkFBbUIsdUNBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZEQUFXO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2REFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBTTtBQUM3QixRQUFRLDZEQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0VBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQVcsMkJBQTJCLHlCQUF5QjtBQUMzRix5QkFBeUIscUVBQU87QUFDaEM7QUFDQSxxQkFBcUIsc0VBQW9CLENBQUMsNkRBQVc7QUFDckQ7QUFDQSx1QkFBdUIsOENBQU07QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsZUFBZSw4Q0FBTSxDQUFDLDBFQUFTLENBQUMsNkRBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2REFBVztBQUM5QixpQkFBaUIsMkVBQVU7QUFDM0IsZUFBZSw4Q0FBTTtBQUNyQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BleGFtcGxlcy9sb2dpbi13aXRoLXBhc3Nwb3J0LXByb3ZpZGVyLWFubm91bmNlLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AZXRoZXJldW1qcyt3YWxsZXRAMi4wLjQvbm9kZV9tb2R1bGVzL0BldGhlcmV1bWpzL3dhbGxldC9kaXN0L2VzbS90aGlyZHBhcnR5LmpzPzBiNGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnl0ZXNUb1V0ZjgsIGNvbmNhdEJ5dGVzLCB1bnByZWZpeGVkSGV4VG9CeXRlcywgdXRmOFRvQnl0ZXMgfSBmcm9tICdAZXRoZXJldW1qcy91dGlsJztcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gJ0BzY3VyZS9iYXNlJztcbmltcG9ydCB7IGRlY3J5cHQgfSBmcm9tICdldGhlcmV1bS1jcnlwdG9ncmFwaHkvYWVzLmpzJztcbmltcG9ydCB7IGtlY2NhazI1NiB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9rZWNjYWsuanMnO1xuaW1wb3J0IHsgcGJrZGYyU3luYyB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9wYmtkZjIuanMnO1xuaW1wb3J0IHsgbWQ1IH0gZnJvbSAnanMtbWQ1JztcbmltcG9ydCB7IFdhbGxldCB9IGZyb20gJy4vd2FsbGV0LmpzJztcbmNvbnN0IGV2cEtkZkRlZmF1bHRzID0ge1xuICAgIGNvdW50OiAxLFxuICAgIGtleXNpemU6IDE2LFxuICAgIGl2c2l6ZTogMTYsXG4gICAgZGlnZXN0OiAnbWQ1Jyxcbn07XG5mdW5jdGlvbiBtZXJnZUV2cEtkZk9wdHNXaXRoRGVmYXVsdHMob3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgICByZXR1cm4gZXZwS2RmRGVmYXVsdHM7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvdW50OiBvcHRzLmNvdW50ID8/IGV2cEtkZkRlZmF1bHRzLmNvdW50LFxuICAgICAgICBrZXlzaXplOiBvcHRzLmtleXNpemUgPz8gZXZwS2RmRGVmYXVsdHMua2V5c2l6ZSxcbiAgICAgICAgaXZzaXplOiBvcHRzLml2c2l6ZSA/PyBldnBLZGZEZWZhdWx0cy5pdnNpemUsXG4gICAgICAgIGRpZ2VzdDogb3B0cy5kaWdlc3QgPz8gZXZwS2RmRGVmYXVsdHMuZGlnZXN0LFxuICAgIH07XG59XG4vKlxuICogb3B0czpcbiAqIC0gZGlnZXN0IC0gZGlnZXN0IGFsZ29yaXRobSwgZGVmYXVsdHMgdG8gbWQ1XG4gKiAtIGNvdW50IC0gaGFzaCBpdGVyYXRpb25zXG4gKiAtIGtleXNpemUgLSBkZXNpcmVkIGtleSBzaXplXG4gKiAtIGl2c2l6ZSAtIGRlc2lyZWQgSVYgc2l6ZVxuICpcbiAqIEFsZ29yaXRobSBmb3JtIGh0dHBzOi8vd3d3Lm9wZW5zc2wub3JnL2RvY3MvbWFubWFzdGVyL2NyeXB0by9FVlBfQnl0ZXNUb0tleS5odG1sXG4gKlxuICogRklYTUU6IG5vdCBvcHRpbWlzZWQgYXQgYWxsXG4gKi9cbmZ1bmN0aW9uIGV2cF9rZGYoZGF0YSwgc2FsdCwgb3B0cykge1xuICAgIGNvbnN0IHBhcmFtcyA9IG1lcmdlRXZwS2RmT3B0c1dpdGhEZWZhdWx0cyhvcHRzKTtcbiAgICAvLyBBIHNpbmdsZSBFVlAgaXRlcmF0aW9uLCByZXR1cm5zIGBEX2lgLCB3aGVyZSBibG9jayBlcXVsYXMgdG8gYERfKGktMSlgXG4gICAgZnVuY3Rpb24gaXRlcihibG9jaykge1xuICAgICAgICBpZiAocGFyYW1zLmRpZ2VzdCAhPT0gJ21kNScpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgbWQ1IGlzIHN1cHBvcnRlZCBpbiBldnBfa2RmJyk7XG4gICAgICAgIGxldCBoYXNoID0gbWQ1LmNyZWF0ZSgpO1xuICAgICAgICBoYXNoLnVwZGF0ZShibG9jayk7XG4gICAgICAgIGhhc2gudXBkYXRlKGRhdGEpO1xuICAgICAgICBoYXNoLnVwZGF0ZShzYWx0KTtcbiAgICAgICAgYmxvY2sgPSBVaW50OEFycmF5LmZyb20oaGFzaC5hcnJheSgpKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDEsIGxlbiA9IHBhcmFtcy5jb3VudDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gbWQ1LmNyZWF0ZSgpO1xuICAgICAgICAgICAgaGFzaC51cGRhdGUoYmxvY2spO1xuICAgICAgICAgICAgYmxvY2sgPSBuZXcgVWludDhBcnJheShoYXNoLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBibG9jaztcbiAgICB9XG4gICAgY29uc3QgcmV0ID0gW107XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChjb25jYXRCeXRlcyguLi5yZXQpLmxlbmd0aCA8IHBhcmFtcy5rZXlzaXplICsgcGFyYW1zLml2c2l6ZSkge1xuICAgICAgICByZXRbaV0gPSBpdGVyKGkgPT09IDAgPyBuZXcgVWludDhBcnJheSgpIDogcmV0W2kgLSAxXSk7XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgY29uc3QgdG1wID0gY29uY2F0Qnl0ZXMoLi4ucmV0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBrZXk6IHRtcC5zdWJhcnJheSgwLCBwYXJhbXMua2V5c2l6ZSksXG4gICAgICAgIGl2OiB0bXAuc3ViYXJyYXkocGFyYW1zLmtleXNpemUsIHBhcmFtcy5rZXlzaXplICsgcGFyYW1zLml2c2l6ZSksXG4gICAgfTtcbn1cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjUyODgzMTEvY3J5cHRvanMtYWVzLXBhdHRlcm4tYWx3YXlzLWVuZHMtd2l0aFxuZnVuY3Rpb24gZGVjb2RlQ3J5cHRvanNTYWx0KGlucHV0KSB7XG4gICAgY29uc3QgY2lwaGVydGV4dCA9IGJhc2U2NC5kZWNvZGUoaW5wdXQpO1xuICAgIGlmIChieXRlc1RvVXRmOChjaXBoZXJ0ZXh0LnN1YmFycmF5KDAsIDgpKSA9PT0gJ1NhbHRlZF9fJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2FsdDogY2lwaGVydGV4dC5zdWJhcnJheSg4LCAxNiksXG4gICAgICAgICAgICBjaXBoZXJ0ZXh0OiBjaXBoZXJ0ZXh0LnN1YmFycmF5KDE2KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgY2lwaGVydGV4dCB9O1xufVxuLypcbiAqIFRoaXJkIFBhcnR5IEFQSTogSW1wb3J0IGEgd2FsbGV0IGdlbmVyYXRlZCBieSBFdGhlcldhbGxldFxuICogVGhpcyB3YWxsZXQgZm9ybWF0IGlzIGNyZWF0ZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL1NpbGVudENpY2Vyby9ldGhlcmV1bWpzLWFjY291bnRzXG4gKiBhbmQgdXNlZCBvbiBodHRwczovL3d3dy5teWV0aGVyd2FsbGV0LmNvbS9cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZyb21FdGhlcldhbGxldChpbnB1dCwgcGFzc3dvcmQpIHtcbiAgICBjb25zdCBqc29uID0gdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyA/IGlucHV0IDogSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgbGV0IHByaXZhdGVLZXk7XG4gICAgaWYgKCFqc29uLmxvY2tlZCkge1xuICAgICAgICBpZiAoanNvbi5wcml2YXRlLmxlbmd0aCAhPT0gNjQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcml2YXRlIGtleSBsZW5ndGgnKTtcbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlS2V5ID0gdW5wcmVmaXhlZEhleFRvQnl0ZXMoanNvbi5wcml2YXRlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bhc3N3b3JkIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA3IGNoYXJhY3RlcnMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGUgXCJlbmNyeXB0ZWRcIiB2ZXJzaW9uIGhhcyB0aGUgbG93IDQgYnl0ZXNcbiAgICAgICAgLy8gb2YgdGhlIGhhc2ggb2YgdGhlIGFkZHJlc3MgYXBwZW5kZWRcbiAgICAgICAgY29uc3QgaGFzaCA9IGpzb24uZW5jcnlwdGVkID8ganNvbi5wcml2YXRlLnNsaWNlKDAsIDEyOCkgOiBqc29uLnByaXZhdGU7XG4gICAgICAgIC8vIGRlY29kZSBvcGVuc3NsIGNpcGhlcnRleHQgKyBzYWx0IGVuY29kaW5nXG4gICAgICAgIGNvbnN0IGNpcGhlciA9IGRlY29kZUNyeXB0b2pzU2FsdChoYXNoKTtcbiAgICAgICAgaWYgKCFjaXBoZXIuc2FsdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBFdGhlcldhbGxldCBrZXkgZm9ybWF0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGVyaXZlIGtleS9pdiB1c2luZyBPcGVuU1NMIEVWUCBhcyBpbXBsZW1lbnRlZCBpbiBDcnlwdG9KU1xuICAgICAgICBjb25zdCBldnAgPSBldnBfa2RmKHV0ZjhUb0J5dGVzKHBhc3N3b3JkKSwgY2lwaGVyLnNhbHQsIHsga2V5c2l6ZTogMzIsIGl2c2l6ZTogMTYgfSk7XG4gICAgICAgIGNvbnN0IHByID0gYXdhaXQgZGVjcnlwdChjaXBoZXIuY2lwaGVydGV4dCwgZXZwLmtleSwgZXZwLml2LCAnYWVzLTI1Ni1jYmMnKTtcbiAgICAgICAgLy8gTk9URTogeWVzLCB0aGV5J3ZlIHJ1biBpdCB0aHJvdWdoIFVURjhcbiAgICAgICAgcHJpdmF0ZUtleSA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKGJ5dGVzVG9VdGY4KHByKSk7XG4gICAgfVxuICAgIGNvbnN0IHdhbGxldCA9IG5ldyBXYWxsZXQocHJpdmF0ZUtleSk7XG4gICAgaWYgKHdhbGxldC5nZXRBZGRyZXNzU3RyaW5nKCkgIT09IGpzb24uYWRkcmVzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJpdmF0ZSBrZXkgb3IgYWRkcmVzcycpO1xuICAgIH1cbiAgICByZXR1cm4gd2FsbGV0O1xufVxuLyoqXG4gKiBUaGlyZCBQYXJ0eSBBUEk6IEltcG9ydCBhIGJyYWluIHdhbGxldCB1c2VkIGJ5IEV0aGVyLkNhbXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdGhlckNhbXAocGFzc3BocmFzZSkge1xuICAgIHJldHVybiBuZXcgV2FsbGV0KGtlY2NhazI1Nih1dGY4VG9CeXRlcyhwYXNzcGhyYXNlKSkpO1xufVxuLyoqXG4gKiBUaGlyZCBQYXJ0eSBBUEk6IEltcG9ydCBhIGJyYWluIHdhbGxldCB1c2VkIGJ5IFF1b3J1bSBXYWxsZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdW9ydW1XYWxsZXQocGFzc3BocmFzZSwgdXNlcmlkKSB7XG4gICAgaWYgKHBhc3NwaHJhc2UubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzcGhyYXNlIG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVycycpO1xuICAgIH1cbiAgICBpZiAodXNlcmlkLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBpZCBtdXN0IGJlIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgbWVyZ2VkID0gdXRmOFRvQnl0ZXMocGFzc3BocmFzZSArIHVzZXJpZCk7XG4gICAgY29uc3Qgc2VlZCA9IHBia2RmMlN5bmMobWVyZ2VkLCBtZXJnZWQsIDIwMDAsIDMyLCAnc2hhMjU2Jyk7XG4gICAgcmV0dXJuIG5ldyBXYWxsZXQoc2VlZCk7XG59XG5leHBvcnQgY29uc3QgVGhpcmRwYXJ0eSA9IHtcbiAgICBmcm9tRXRoZXJXYWxsZXQsXG4gICAgZnJvbUV0aGVyQ2FtcCxcbiAgICBmcm9tUXVvcnVtV2FsbGV0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRoaXJkcGFydHkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/thirdparty.js\n");

/***/ }),

/***/ "(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js":
/*!***************************************************************************************************************!*\
  !*** ../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Wallet: () => (/* binding */ Wallet)\n/* harmony export */ });\n/* harmony import */ var _ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethereumjs/util */ \"(ssr)/../../../node_modules/.pnpm/@ethereumjs+util@9.1.0/node_modules/@ethereumjs/util/dist/esm/index.js\");\n/* harmony import */ var _scure_base__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @scure/base */ \"(ssr)/../../../node_modules/.pnpm/@scure+base@1.1.7/node_modules/@scure/base/lib/esm/index.js\");\n/* harmony import */ var ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethereum-cryptography/aes.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/aes.js\");\n/* harmony import */ var ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethereum-cryptography/keccak.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/keccak.js\");\n/* harmony import */ var ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethereum-cryptography/pbkdf2.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/pbkdf2.js\");\n/* harmony import */ var ethereum_cryptography_scrypt_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethereum-cryptography/scrypt.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/scrypt.js\");\n/* harmony import */ var ethereum_cryptography_sha256_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethereum-cryptography/sha256.js */ \"(ssr)/../../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/sha256.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(ssr)/../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\n\n\n\nconst bs58check = (0,_scure_base__WEBPACK_IMPORTED_MODULE_6__.base58check)(ethereum_cryptography_sha256_js__WEBPACK_IMPORTED_MODULE_5__.sha256);\nfunction scryptV1(password, salt, kdfparams) {\n    const { N, P, R, DkLen } = kdfparams;\n    return (0,ethereum_cryptography_scrypt_js__WEBPACK_IMPORTED_MODULE_4__.scrypt)(password, salt, N, P, R, DkLen);\n}\nfunction scryptV3(password, kdfparams) {\n    const { salt, n, p, r, dklen } = kdfparams;\n    return (0,ethereum_cryptography_scrypt_js__WEBPACK_IMPORTED_MODULE_4__.scrypt)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), salt, n, p, r, dklen);\n}\nfunction scryptV3Out(password, kdfparams) {\n    const { salt, n, p, r, dklen } = kdfparams;\n    return (0,ethereum_cryptography_scrypt_js__WEBPACK_IMPORTED_MODULE_4__.scrypt)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(salt), n, p, r, dklen);\n}\nfunction validateHexString(paramName, str, length) {\n    if (str.toLowerCase().startsWith('0x')) {\n        str = str.slice(2);\n    }\n    if (!str && length === undefined) {\n        return str;\n    }\n    if (length % 2) {\n        throw new Error(`Invalid length argument, must be an even number`);\n    }\n    if (typeof length === 'number' && str.length !== length) {\n        throw new Error(`Invalid ${paramName}, string must be ${length} hex characters`);\n    }\n    if (!/^([0-9a-f]{2})+$/i.test(str)) {\n        const howMany = typeof length === 'number' ? length : 'empty or a non-zero even number of';\n        throw new Error(`Invalid ${paramName}, string must be ${howMany} hex characters`);\n    }\n    return str;\n}\nfunction validateBytes(paramName, bytes, length) {\n    if (!(bytes instanceof Uint8Array)) {\n        const howManyHex = typeof length === 'number' ? `${length * 2}` : 'empty or a non-zero even number of';\n        const howManyBytes = typeof length === 'number' ? ` (${length} bytes)` : '';\n        throw new Error(`Invalid ${paramName}, must be a string (${howManyHex} hex characters) or Uint8Array${howManyBytes}`);\n    }\n    if (typeof length === 'number' && bytes.length !== length) {\n        throw new Error(`Invalid ${paramName}, Uint8Array must be ${length} bytes`);\n    }\n    return bytes;\n}\nfunction mergeToV3ParamsWithDefaults(params) {\n    const v3Defaults = {\n        cipher: 'aes-128-ctr',\n        kdf: 'scrypt',\n        salt: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(32),\n        iv: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(16),\n        uuid: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(16),\n        dklen: 32,\n        c: 262144,\n        n: 262144,\n        r: 8,\n        p: 1,\n    };\n    if (!params) {\n        return v3Defaults;\n    }\n    if (typeof params.salt === 'string') {\n        params.salt = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(validateHexString('salt', params.salt));\n    }\n    if (typeof params.iv === 'string') {\n        params.iv = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(validateHexString('iv', params.iv, 32));\n    }\n    if (typeof params.uuid === 'string') {\n        params.uuid = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(validateHexString('uuid', params.uuid, 32));\n    }\n    if (params.salt) {\n        validateBytes('salt', params.salt);\n    }\n    if (params.iv) {\n        validateBytes('iv', params.iv, 16);\n    }\n    if (params.uuid) {\n        validateBytes('uuid', params.uuid, 16);\n    }\n    return {\n        ...v3Defaults,\n        ...params,\n    };\n}\nfunction kdfParamsForPBKDF(opts) {\n    return {\n        dklen: opts.dklen,\n        salt: opts.salt,\n        c: opts.c,\n        prf: 'hmac-sha256',\n    };\n}\nfunction kdfParamsForScrypt(opts) {\n    return {\n        dklen: opts.dklen,\n        salt: opts.salt,\n        n: opts.n,\n        p: opts.p,\n        r: opts.r,\n    };\n}\n// wallet implementation\nclass Wallet {\n    constructor(privateKey, publicKey = undefined) {\n        this.privateKey = privateKey;\n        this.publicKey = publicKey;\n        if (privateKey && publicKey) {\n            throw new Error('Cannot supply both a private and a public key to the constructor');\n        }\n        if (privateKey && !(0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.isValidPrivate)(privateKey)) {\n            throw new Error('Private key does not satisfy the curve requirements (ie. it is invalid)');\n        }\n        if (publicKey && !(0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.isValidPublic)(publicKey)) {\n            throw new Error('Invalid public key');\n        }\n    }\n    // static methods\n    /**\n     * Create an instance based on a new random key.\n     *\n     * @param icapDirect setting this to `true` will generate an address suitable for the `ICAP Direct mode`\n     */\n    static generate(icapDirect = false) {\n        if (icapDirect) {\n            const max = BigInt('0x088f924eeceeda7fe92e1f5b0fffffffffffffff');\n            for (;;) {\n                const privateKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(32);\n                const hex = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.privateToAddress)(privateKey));\n                if (BigInt('0x' + hex) <= max) {\n                    return new Wallet(privateKey);\n                }\n            }\n        }\n        else {\n            return new Wallet((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(32));\n        }\n    }\n    /**\n     * Create an instance where the address is valid against the supplied pattern (**this will be very slow**)\n     */\n    static generateVanityAddress(pattern) {\n        if (!(pattern instanceof RegExp)) {\n            pattern = new RegExp(pattern);\n        }\n        for (;;) {\n            const privateKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(32);\n            const address = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.privateToAddress)(privateKey);\n            if (pattern.test((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(address))) {\n                return new Wallet(privateKey);\n            }\n        }\n    }\n    /**\n     * Create an instance based on a public key (certain methods will not be available)\n     *\n     * This method only accepts uncompressed Ethereum-style public keys, unless\n     * the `nonStrict` flag is set to true.\n     */\n    static fromPublicKey(publicKey, nonStrict = false) {\n        if (nonStrict) {\n            publicKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.importPublic)(publicKey);\n        }\n        return new Wallet(undefined, publicKey);\n    }\n    /**\n     * Create an instance based on a BIP32 extended public key (xpub)\n     */\n    static fromExtendedPublicKey(extendedPublicKey) {\n        if (extendedPublicKey.slice(0, 4) !== 'xpub') {\n            throw new Error('Not an extended public key');\n        }\n        const publicKey = bs58check.decode(extendedPublicKey).subarray(45);\n        // Convert to an Ethereum public key\n        return Wallet.fromPublicKey(publicKey, true);\n    }\n    /**\n     * Create an instance based on a raw private key\n     */\n    static fromPrivateKey(privateKey) {\n        return new Wallet(privateKey);\n    }\n    /**\n     * Create an instance based on a BIP32 extended private key (xprv)\n     */\n    static fromExtendedPrivateKey(extendedPrivateKey) {\n        if (extendedPrivateKey.slice(0, 4) !== 'xprv') {\n            throw new Error('Not an extended private key');\n        }\n        const tmp = bs58check.decode(extendedPrivateKey);\n        if (tmp[45] !== 0) {\n            throw new Error('Invalid extended private key');\n        }\n        return Wallet.fromPrivateKey(tmp.subarray(46));\n    }\n    /**\n     * Import a wallet (Version 1 of the Ethereum wallet format).\n     *\n     * @param input A JSON serialized string, or an object representing V1 Keystore.\n     * @param password The keystore password.\n     */\n    static async fromV1(input, password) {\n        const json = typeof input === 'object' ? input : JSON.parse(input);\n        if (json.Version !== '1') {\n            throw new Error('Not a V1 Wallet');\n        }\n        if (json.Crypto.KeyHeader.Kdf !== 'scrypt') {\n            throw new Error('Unsupported key derivation scheme');\n        }\n        const kdfparams = json.Crypto.KeyHeader.KdfParams;\n        const salt = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.Crypto.Salt);\n        const derivedKey = await scryptV1((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), salt, kdfparams);\n        const ciphertext = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.Crypto.CipherText);\n        const mac = (0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.concatBytes)(derivedKey.subarray(16, 32), ciphertext));\n        if ((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(mac) !== json.Crypto.MAC) {\n            throw new Error('Key derivation failed - possibly wrong passphrase');\n        }\n        const seed = await ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__.decrypt(ciphertext, (0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)(derivedKey.subarray(0, 16)).subarray(0, 16), (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.Crypto.IV), 'aes-128-cbc');\n        return new Wallet(seed);\n    }\n    /**\n     * Import a wallet (Version 3 of the Ethereum wallet format). Set `nonStrict` true to accept files with mixed-caps.\n     *\n     * @param input A JSON serialized string, or an object representing V3 Keystore.\n     * @param password The keystore password.\n     */\n    static async fromV3(input, password, nonStrict = false) {\n        const json = typeof input === 'object' ? input : JSON.parse(nonStrict ? input.toLowerCase() : input);\n        if (json.version !== 3) {\n            throw new Error('Not a V3 wallet');\n        }\n        let derivedKey, kdfparams;\n        if (json.crypto.kdf === 'scrypt') {\n            kdfparams = json.crypto.kdfparams;\n            // FIXME: support progress reporting callback\n            derivedKey = await scryptV3Out(password, kdfparams);\n        }\n        else if (json.crypto.kdf === 'pbkdf2') {\n            kdfparams = json.crypto.kdfparams;\n            if (kdfparams.prf !== 'hmac-sha256') {\n                throw new Error('Unsupported parameters to PBKDF2');\n            }\n            derivedKey = await (0,ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__.pbkdf2)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(kdfparams.salt), kdfparams.c, kdfparams.dklen, 'sha256');\n        }\n        else {\n            throw new Error('Unsupported key derivation scheme');\n        }\n        const ciphertext = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.crypto.ciphertext);\n        const mac = (0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.concatBytes)(derivedKey.subarray(16, 32), ciphertext));\n        if ((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(mac) !== json.crypto.mac) {\n            throw new Error('Key derivation failed - possibly wrong passphrase');\n        }\n        const seed = await ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__.decrypt(ciphertext, derivedKey.subarray(0, 16), (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.crypto.cipherparams.iv), json.crypto.cipher);\n        return new Wallet(seed);\n    }\n    /*\n     * Import an Ethereum Pre Sale wallet.\n     * Based on https://github.com/ethereum/pyethsaletool/blob/master/pyethsaletool.py\n     * JSON fields: encseed, ethaddr, btcaddr, email\n     *\n     * @param input A JSON serialized string, or an object representing EthSale Keystore.\n     * @param password The keystore password.\n     */\n    static async fromEthSale(input, password) {\n        const json = typeof input === 'object' ? input : JSON.parse(input);\n        const encseed = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.unprefixedHexToBytes)(json.encseed);\n        // key derivation\n        const pass = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password);\n        const derivedKey = (await (0,ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__.pbkdf2)(pass, pass, 2000, 32, 'sha256')).subarray(0, 16);\n        // seed decoding (IV is first 16 bytes)\n        // NOTE: crypto (derived from openssl) when used with aes-*-cbc will handle PKCS#7 padding internally\n        //       see also http://stackoverflow.com/a/31614770/4964819\n        const seed = await ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__.decrypt(encseed.subarray(16), derivedKey, encseed.subarray(0, 16), 'aes-128-cbc', true);\n        const wallet = new Wallet((0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)(seed));\n        if ((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(wallet.getAddress()) !== json.ethaddr) {\n            throw new Error('Decoded key mismatch - possibly wrong passphrase');\n        }\n        return wallet;\n    }\n    // private getters\n    /**\n     * Returns the wallet's public key.\n     */\n    get pubKey() {\n        if (this.publicKey === undefined || this.publicKey === null) {\n            this.publicKey = (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.privateToPublic)(this.privateKey);\n        }\n        return this.publicKey;\n    }\n    /**\n     * Returns the wallet's private key.\n     */\n    get privKey() {\n        if (this.privateKey === undefined || this.privateKey === null) {\n            throw new Error('This is a public key only wallet');\n        }\n        return this.privateKey;\n    }\n    // public instance methods\n    /**\n     * Returns the wallet's private key.\n     *\n     */\n    getPrivateKey() {\n        return this.privKey;\n    }\n    getPrivateKeyString() {\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToHex)(this.privKey);\n    }\n    /**\n     * Returns the wallet's public key.\n     */\n    getPublicKey() {\n        return this.pubKey;\n    }\n    /**\n     * Returns the wallet's public key as a \"0x\" prefixed hex string\n     */\n    getPublicKeyString() {\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToHex)(this.getPublicKey());\n    }\n    /**\n     * Returns the wallet's address.\n     */\n    getAddress() {\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.publicToAddress)(this.pubKey);\n    }\n    /**\n     * Returns the wallet's address as a \"0x\" prefixed hex string\n     */\n    getAddressString() {\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToHex)(this.getAddress());\n    }\n    /**\n     * Returns the wallet's private key as a \"0x\" prefixed hex string checksummed\n     * according to [EIP 55](https://github.com/ethereum/EIPs/issues/55).\n     */\n    getChecksumAddressString() {\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(this.getAddressString());\n    }\n    /**\n     * Returns an Etherem Version 3 Keystore Format object representing the wallet\n     *\n     * @param password The password used to encrypt the Keystore.\n     * @param opts The options for the keystore. See [its spec](https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition) for more info.\n     */\n    async toV3(password, opts) {\n        if (this.privateKey === undefined || this.privateKey === null) {\n            throw new Error('This is a public key only wallet');\n        }\n        const v3Params = mergeToV3ParamsWithDefaults(opts);\n        let kdfParams;\n        let derivedKey;\n        switch (v3Params.kdf) {\n            case \"pbkdf2\" /* KDFFunctions.PBKDF */:\n                kdfParams = kdfParamsForPBKDF(v3Params);\n                derivedKey = await (0,ethereum_cryptography_pbkdf2_js__WEBPACK_IMPORTED_MODULE_3__.pbkdf2)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.utf8ToBytes)(password), kdfParams.salt, kdfParams.c, kdfParams.dklen, 'sha256');\n                break;\n            case \"scrypt\" /* KDFFunctions.Scrypt */:\n                kdfParams = kdfParamsForScrypt(v3Params);\n                // FIXME: support progress reporting callback\n                derivedKey = await scryptV3(password, kdfParams);\n                break;\n            default:\n                throw new Error('Unsupported kdf');\n        }\n        const ciphertext = await ethereum_cryptography_aes_js__WEBPACK_IMPORTED_MODULE_1__.encrypt(this.privKey, derivedKey.subarray(0, 16), v3Params.iv, v3Params.cipher, false);\n        const mac = (0,ethereum_cryptography_keccak_js__WEBPACK_IMPORTED_MODULE_2__.keccak256)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.concatBytes)(derivedKey.subarray(16, 32), ciphertext));\n        return {\n            version: 3,\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({ random: v3Params.uuid }),\n            // @ts-ignore - the official V3 keystore spec omits the address key\n            address: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(this.getAddress()),\n            crypto: {\n                ciphertext: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(ciphertext),\n                cipherparams: { iv: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(v3Params.iv) },\n                cipher: v3Params.cipher,\n                kdf: v3Params.kdf,\n                kdfparams: {\n                    ...kdfParams,\n                    salt: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(kdfParams.salt),\n                },\n                mac: (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(mac),\n            },\n        };\n    }\n    /**\n     * Return the suggested filename for V3 keystores.\n     */\n    getV3Filename(timestamp) {\n        /*\n         * We want a timestamp like 2016-03-15T17-11-33.007598288Z. Date formatting\n         * is a pain in Javascript, everbody knows that. We could use moment.js,\n         * but decide to do it manually in order to save space.\n         *\n         * toJSON() returns a pretty close version, so let's use it. It is not UTC though,\n         * but does it really matter?\n         *\n         * Alternative manual way with padding and Date fields: http://stackoverflow.com/a/7244288/4964819\n         *\n         */\n        const ts = timestamp !== undefined ? new Date(timestamp) : new Date();\n        return [\n            'UTC--',\n            ts.toJSON().replace(/:/g, '-'),\n            '--',\n            (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.bytesToUnprefixedHex)(this.getAddress()),\n        ].join('');\n    }\n    async toV3String(password, opts) {\n        return JSON.stringify(await this.toV3(password, opts));\n    }\n    /**\n     * Verify the publicKey, privateKey pair\n     *\n     * @param publicKey the public key to verify against the private key of the wallet\n     */\n    verifyPublicKey(publicKey) {\n        if (this.privateKey === undefined)\n            return false;\n        return (0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.equalsBytes)((0,_ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.privateToPublic)(this.privateKey), publicKey);\n    }\n}\n//# sourceMappingURL=wallet.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BldGhlcmV1bWpzK3dhbGxldEAyLjAuNC9ub2RlX21vZHVsZXMvQGV0aGVyZXVtanMvd2FsbGV0L2Rpc3QvZXNtL3dhbGxldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBbVE7QUFDek47QUFDVTtBQUNRO0FBQ0g7QUFDQTtBQUNBO0FBQ3JCO0FBQ3BDLGtCQUFrQix3REFBVyxDQUFDLG1FQUFNO0FBQ3BDO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0IsV0FBVyx1RUFBTTtBQUNqQjtBQUNBO0FBQ0EsWUFBWSx1QkFBdUI7QUFDbkMsV0FBVyx1RUFBTSxDQUFDLDZEQUFXO0FBQzdCO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQyxXQUFXLHVFQUFNLENBQUMsNkRBQVcsWUFBWSxzRUFBb0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFVBQVUsbUJBQW1CLFFBQVE7QUFDeEU7QUFDQSxxQkFBcUIsRUFBRTtBQUN2QjtBQUNBLG1DQUFtQyxVQUFVLG1CQUFtQixTQUFTO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsV0FBVztBQUN0RSwrREFBK0QsUUFBUTtBQUN2RSxtQ0FBbUMsVUFBVSxzQkFBc0IsWUFBWSwrQkFBK0IsYUFBYTtBQUMzSDtBQUNBO0FBQ0EsbUNBQW1DLFVBQVUsdUJBQXVCLFFBQVE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZEQUFXO0FBQ3pCLFlBQVksNkRBQVc7QUFDdkIsY0FBYyw2REFBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzRUFBb0I7QUFDMUM7QUFDQTtBQUNBLG9CQUFvQixzRUFBb0I7QUFDeEM7QUFDQTtBQUNBLHNCQUFzQixzRUFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0VBQWM7QUFDekM7QUFDQTtBQUNBLDBCQUEwQiwrREFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsbUNBQW1DLDZEQUFXO0FBQzlDLDRCQUE0QixzRUFBb0IsQ0FBQyxrRUFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZiwrQkFBK0IsNkRBQVc7QUFDMUMsNEJBQTRCLGtFQUFnQjtBQUM1Qyw2QkFBNkIsc0VBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0VBQW9CO0FBQ3pDLDBDQUEwQyw2REFBVztBQUNyRCwyQkFBMkIsc0VBQW9CO0FBQy9DLG9CQUFvQiwwRUFBUyxDQUFDLDZEQUFXO0FBQ3pDLFlBQVksc0VBQW9CO0FBQ2hDO0FBQ0E7QUFDQSwyQkFBMkIsaUVBQVcsYUFBYSwwRUFBUyw4Q0FBOEMsc0VBQW9CO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1RUFBTSxDQUFDLDZEQUFXLFlBQVksc0VBQW9CO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNFQUFvQjtBQUMvQyxvQkFBb0IsMEVBQVMsQ0FBQyw2REFBVztBQUN6QyxZQUFZLHNFQUFvQjtBQUNoQztBQUNBO0FBQ0EsMkJBQTJCLGlFQUFXLHlDQUF5QyxzRUFBb0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNFQUFvQjtBQUM1QztBQUNBLHFCQUFxQiw2REFBVztBQUNoQyxrQ0FBa0MsdUVBQU07QUFDeEM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlFQUFXO0FBQ3RDLGtDQUFrQywwRUFBUztBQUMzQyxZQUFZLHNFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpRUFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlFQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUVBQU0sQ0FBQyw2REFBVztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsaUVBQVc7QUFDNUMsb0JBQW9CLDBFQUFTLENBQUMsNkRBQVc7QUFDekM7QUFDQTtBQUNBLGdCQUFnQixnREFBTSxHQUFHLHVCQUF1QjtBQUNoRDtBQUNBLHFCQUFxQixzRUFBb0I7QUFDekM7QUFDQSw0QkFBNEIsc0VBQW9CO0FBQ2hELGdDQUFnQyxJQUFJLHNFQUFvQixlQUFlO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNFQUFvQjtBQUM5QyxpQkFBaUI7QUFDakIscUJBQXFCLHNFQUFvQjtBQUN6QyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkRBQVcsQ0FBQyxpRUFBZTtBQUMxQztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZXhhbXBsZXMvbG9naW4td2l0aC1wYXNzcG9ydC1wcm92aWRlci1hbm5vdW5jZS8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGV0aGVyZXVtanMrd2FsbGV0QDIuMC40L25vZGVfbW9kdWxlcy9AZXRoZXJldW1qcy93YWxsZXQvZGlzdC9lc20vd2FsbGV0LmpzPzgyNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnl0ZXNUb0hleCwgYnl0ZXNUb1VucHJlZml4ZWRIZXgsIGNvbmNhdEJ5dGVzLCBlcXVhbHNCeXRlcywgaW1wb3J0UHVibGljLCBpc1ZhbGlkUHJpdmF0ZSwgaXNWYWxpZFB1YmxpYywgcHJpdmF0ZVRvQWRkcmVzcywgcHJpdmF0ZVRvUHVibGljLCBwdWJsaWNUb0FkZHJlc3MsIHJhbmRvbUJ5dGVzLCB0b0NoZWNrc3VtQWRkcmVzcywgdW5wcmVmaXhlZEhleFRvQnl0ZXMsIHV0ZjhUb0J5dGVzLCB9IGZyb20gJ0BldGhlcmV1bWpzL3V0aWwnO1xuaW1wb3J0IHsgYmFzZTU4Y2hlY2sgfSBmcm9tICdAc2N1cmUvYmFzZSc7XG5pbXBvcnQgKiBhcyBhZXMgZnJvbSAnZXRoZXJldW0tY3J5cHRvZ3JhcGh5L2Flcy5qcyc7XG5pbXBvcnQgeyBrZWNjYWsyNTYgfSBmcm9tICdldGhlcmV1bS1jcnlwdG9ncmFwaHkva2VjY2FrLmpzJztcbmltcG9ydCB7IHBia2RmMiB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9wYmtkZjIuanMnO1xuaW1wb3J0IHsgc2NyeXB0IH0gZnJvbSAnZXRoZXJldW0tY3J5cHRvZ3JhcGh5L3NjcnlwdC5qcyc7XG5pbXBvcnQgeyBzaGEyNTYgfSBmcm9tICdldGhlcmV1bS1jcnlwdG9ncmFwaHkvc2hhMjU2LmpzJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuY29uc3QgYnM1OGNoZWNrID0gYmFzZTU4Y2hlY2soc2hhMjU2KTtcbmZ1bmN0aW9uIHNjcnlwdFYxKHBhc3N3b3JkLCBzYWx0LCBrZGZwYXJhbXMpIHtcbiAgICBjb25zdCB7IE4sIFAsIFIsIERrTGVuIH0gPSBrZGZwYXJhbXM7XG4gICAgcmV0dXJuIHNjcnlwdChwYXNzd29yZCwgc2FsdCwgTiwgUCwgUiwgRGtMZW4pO1xufVxuZnVuY3Rpb24gc2NyeXB0VjMocGFzc3dvcmQsIGtkZnBhcmFtcykge1xuICAgIGNvbnN0IHsgc2FsdCwgbiwgcCwgciwgZGtsZW4gfSA9IGtkZnBhcmFtcztcbiAgICByZXR1cm4gc2NyeXB0KHV0ZjhUb0J5dGVzKHBhc3N3b3JkKSwgc2FsdCwgbiwgcCwgciwgZGtsZW4pO1xufVxuZnVuY3Rpb24gc2NyeXB0VjNPdXQocGFzc3dvcmQsIGtkZnBhcmFtcykge1xuICAgIGNvbnN0IHsgc2FsdCwgbiwgcCwgciwgZGtsZW4gfSA9IGtkZnBhcmFtcztcbiAgICByZXR1cm4gc2NyeXB0KHV0ZjhUb0J5dGVzKHBhc3N3b3JkKSwgdW5wcmVmaXhlZEhleFRvQnl0ZXMoc2FsdCksIG4sIHAsIHIsIGRrbGVuKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlSGV4U3RyaW5nKHBhcmFtTmFtZSwgc3RyLCBsZW5ndGgpIHtcbiAgICBpZiAoc3RyLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnMHgnKSkge1xuICAgICAgICBzdHIgPSBzdHIuc2xpY2UoMik7XG4gICAgfVxuICAgIGlmICghc3RyICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIGlmIChsZW5ndGggJSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBsZW5ndGggYXJndW1lbnQsIG11c3QgYmUgYW4gZXZlbiBudW1iZXJgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIHN0ci5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgJHtwYXJhbU5hbWV9LCBzdHJpbmcgbXVzdCBiZSAke2xlbmd0aH0gaGV4IGNoYXJhY3RlcnNgKTtcbiAgICB9XG4gICAgaWYgKCEvXihbMC05YS1mXXsyfSkrJC9pLnRlc3Qoc3RyKSkge1xuICAgICAgICBjb25zdCBob3dNYW55ID0gdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgPyBsZW5ndGggOiAnZW1wdHkgb3IgYSBub24temVybyBldmVuIG51bWJlciBvZic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCAke3BhcmFtTmFtZX0sIHN0cmluZyBtdXN0IGJlICR7aG93TWFueX0gaGV4IGNoYXJhY3RlcnNgKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQnl0ZXMocGFyYW1OYW1lLCBieXRlcywgbGVuZ3RoKSB7XG4gICAgaWYgKCEoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICBjb25zdCBob3dNYW55SGV4ID0gdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgPyBgJHtsZW5ndGggKiAyfWAgOiAnZW1wdHkgb3IgYSBub24temVybyBldmVuIG51bWJlciBvZic7XG4gICAgICAgIGNvbnN0IGhvd01hbnlCeXRlcyA9IHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInID8gYCAoJHtsZW5ndGh9IGJ5dGVzKWAgOiAnJztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkICR7cGFyYW1OYW1lfSwgbXVzdCBiZSBhIHN0cmluZyAoJHtob3dNYW55SGV4fSBoZXggY2hhcmFjdGVycykgb3IgVWludDhBcnJheSR7aG93TWFueUJ5dGVzfWApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgYnl0ZXMubGVuZ3RoICE9PSBsZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkICR7cGFyYW1OYW1lfSwgVWludDhBcnJheSBtdXN0IGJlICR7bGVuZ3RofSBieXRlc2ApO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59XG5mdW5jdGlvbiBtZXJnZVRvVjNQYXJhbXNXaXRoRGVmYXVsdHMocGFyYW1zKSB7XG4gICAgY29uc3QgdjNEZWZhdWx0cyA9IHtcbiAgICAgICAgY2lwaGVyOiAnYWVzLTEyOC1jdHInLFxuICAgICAgICBrZGY6ICdzY3J5cHQnLFxuICAgICAgICBzYWx0OiByYW5kb21CeXRlcygzMiksXG4gICAgICAgIGl2OiByYW5kb21CeXRlcygxNiksXG4gICAgICAgIHV1aWQ6IHJhbmRvbUJ5dGVzKDE2KSxcbiAgICAgICAgZGtsZW46IDMyLFxuICAgICAgICBjOiAyNjIxNDQsXG4gICAgICAgIG46IDI2MjE0NCxcbiAgICAgICAgcjogOCxcbiAgICAgICAgcDogMSxcbiAgICB9O1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB2M0RlZmF1bHRzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhcmFtcy5zYWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXJhbXMuc2FsdCA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKHZhbGlkYXRlSGV4U3RyaW5nKCdzYWx0JywgcGFyYW1zLnNhbHQpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuaXYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHBhcmFtcy5pdiA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKHZhbGlkYXRlSGV4U3RyaW5nKCdpdicsIHBhcmFtcy5pdiwgMzIpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMudXVpZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGFyYW1zLnV1aWQgPSB1bnByZWZpeGVkSGV4VG9CeXRlcyh2YWxpZGF0ZUhleFN0cmluZygndXVpZCcsIHBhcmFtcy51dWlkLCAzMikpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnNhbHQpIHtcbiAgICAgICAgdmFsaWRhdGVCeXRlcygnc2FsdCcsIHBhcmFtcy5zYWx0KTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5pdikge1xuICAgICAgICB2YWxpZGF0ZUJ5dGVzKCdpdicsIHBhcmFtcy5pdiwgMTYpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnV1aWQpIHtcbiAgICAgICAgdmFsaWRhdGVCeXRlcygndXVpZCcsIHBhcmFtcy51dWlkLCAxNik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnYzRGVmYXVsdHMsXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICB9O1xufVxuZnVuY3Rpb24ga2RmUGFyYW1zRm9yUEJLREYob3B0cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRrbGVuOiBvcHRzLmRrbGVuLFxuICAgICAgICBzYWx0OiBvcHRzLnNhbHQsXG4gICAgICAgIGM6IG9wdHMuYyxcbiAgICAgICAgcHJmOiAnaG1hYy1zaGEyNTYnLFxuICAgIH07XG59XG5mdW5jdGlvbiBrZGZQYXJhbXNGb3JTY3J5cHQob3B0cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRrbGVuOiBvcHRzLmRrbGVuLFxuICAgICAgICBzYWx0OiBvcHRzLnNhbHQsXG4gICAgICAgIG46IG9wdHMubixcbiAgICAgICAgcDogb3B0cy5wLFxuICAgICAgICByOiBvcHRzLnIsXG4gICAgfTtcbn1cbi8vIHdhbGxldCBpbXBsZW1lbnRhdGlvblxuZXhwb3J0IGNsYXNzIFdhbGxldCB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZUtleSwgcHVibGljS2V5ID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucHJpdmF0ZUtleSA9IHByaXZhdGVLZXk7XG4gICAgICAgIHRoaXMucHVibGljS2V5ID0gcHVibGljS2V5O1xuICAgICAgICBpZiAocHJpdmF0ZUtleSAmJiBwdWJsaWNLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHN1cHBseSBib3RoIGEgcHJpdmF0ZSBhbmQgYSBwdWJsaWMga2V5IHRvIHRoZSBjb25zdHJ1Y3RvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcml2YXRlS2V5ICYmICFpc1ZhbGlkUHJpdmF0ZShwcml2YXRlS2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcml2YXRlIGtleSBkb2VzIG5vdCBzYXRpc2Z5IHRoZSBjdXJ2ZSByZXF1aXJlbWVudHMgKGllLiBpdCBpcyBpbnZhbGlkKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwdWJsaWNLZXkgJiYgIWlzVmFsaWRQdWJsaWMocHVibGljS2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHB1YmxpYyBrZXknKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzdGF0aWMgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBiYXNlZCBvbiBhIG5ldyByYW5kb20ga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGljYXBEaXJlY3Qgc2V0dGluZyB0aGlzIHRvIGB0cnVlYCB3aWxsIGdlbmVyYXRlIGFuIGFkZHJlc3Mgc3VpdGFibGUgZm9yIHRoZSBgSUNBUCBEaXJlY3QgbW9kZWBcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGUoaWNhcERpcmVjdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChpY2FwRGlyZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBtYXggPSBCaWdJbnQoJzB4MDg4ZjkyNGVlY2VlZGE3ZmU5MmUxZjViMGZmZmZmZmZmZmZmZmZmZicpO1xuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXkgPSByYW5kb21CeXRlcygzMik7XG4gICAgICAgICAgICAgICAgY29uc3QgaGV4ID0gYnl0ZXNUb1VucHJlZml4ZWRIZXgocHJpdmF0ZVRvQWRkcmVzcyhwcml2YXRlS2V5KSk7XG4gICAgICAgICAgICAgICAgaWYgKEJpZ0ludCgnMHgnICsgaGV4KSA8PSBtYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQocHJpdmF0ZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQocmFuZG9tQnl0ZXMoMzIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugd2hlcmUgdGhlIGFkZHJlc3MgaXMgdmFsaWQgYWdhaW5zdCB0aGUgc3VwcGxpZWQgcGF0dGVybiAoKip0aGlzIHdpbGwgYmUgdmVyeSBzbG93KiopXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlVmFuaXR5QWRkcmVzcyhwYXR0ZXJuKSB7XG4gICAgICAgIGlmICghKHBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKSB7XG4gICAgICAgICAgICBwYXR0ZXJuID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBjb25zdCBwcml2YXRlS2V5ID0gcmFuZG9tQnl0ZXMoMzIpO1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IHByaXZhdGVUb0FkZHJlc3MocHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBpZiAocGF0dGVybi50ZXN0KGJ5dGVzVG9VbnByZWZpeGVkSGV4KGFkZHJlc3MpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2FsbGV0KHByaXZhdGVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBiYXNlZCBvbiBhIHB1YmxpYyBrZXkgKGNlcnRhaW4gbWV0aG9kcyB3aWxsIG5vdCBiZSBhdmFpbGFibGUpXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBvbmx5IGFjY2VwdHMgdW5jb21wcmVzc2VkIEV0aGVyZXVtLXN0eWxlIHB1YmxpYyBrZXlzLCB1bmxlc3NcbiAgICAgKiB0aGUgYG5vblN0cmljdGAgZmxhZyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVB1YmxpY0tleShwdWJsaWNLZXksIG5vblN0cmljdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChub25TdHJpY3QpIHtcbiAgICAgICAgICAgIHB1YmxpY0tleSA9IGltcG9ydFB1YmxpYyhwdWJsaWNLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgV2FsbGV0KHVuZGVmaW5lZCwgcHVibGljS2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIGJhc2VkIG9uIGEgQklQMzIgZXh0ZW5kZWQgcHVibGljIGtleSAoeHB1YilcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUV4dGVuZGVkUHVibGljS2V5KGV4dGVuZGVkUHVibGljS2V5KSB7XG4gICAgICAgIGlmIChleHRlbmRlZFB1YmxpY0tleS5zbGljZSgwLCA0KSAhPT0gJ3hwdWInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhbiBleHRlbmRlZCBwdWJsaWMga2V5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gYnM1OGNoZWNrLmRlY29kZShleHRlbmRlZFB1YmxpY0tleSkuc3ViYXJyYXkoNDUpO1xuICAgICAgICAvLyBDb252ZXJ0IHRvIGFuIEV0aGVyZXVtIHB1YmxpYyBrZXlcbiAgICAgICAgcmV0dXJuIFdhbGxldC5mcm9tUHVibGljS2V5KHB1YmxpY0tleSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBiYXNlZCBvbiBhIHJhdyBwcml2YXRlIGtleVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUHJpdmF0ZUtleShwcml2YXRlS2V5KSB7XG4gICAgICAgIHJldHVybiBuZXcgV2FsbGV0KHByaXZhdGVLZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2UgYmFzZWQgb24gYSBCSVAzMiBleHRlbmRlZCBwcml2YXRlIGtleSAoeHBydilcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUV4dGVuZGVkUHJpdmF0ZUtleShleHRlbmRlZFByaXZhdGVLZXkpIHtcbiAgICAgICAgaWYgKGV4dGVuZGVkUHJpdmF0ZUtleS5zbGljZSgwLCA0KSAhPT0gJ3hwcnYnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhbiBleHRlbmRlZCBwcml2YXRlIGtleScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRtcCA9IGJzNThjaGVjay5kZWNvZGUoZXh0ZW5kZWRQcml2YXRlS2V5KTtcbiAgICAgICAgaWYgKHRtcFs0NV0gIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBleHRlbmRlZCBwcml2YXRlIGtleScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBXYWxsZXQuZnJvbVByaXZhdGVLZXkodG1wLnN1YmFycmF5KDQ2KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcG9ydCBhIHdhbGxldCAoVmVyc2lvbiAxIG9mIHRoZSBFdGhlcmV1bSB3YWxsZXQgZm9ybWF0KS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBBIEpTT04gc2VyaWFsaXplZCBzdHJpbmcsIG9yIGFuIG9iamVjdCByZXByZXNlbnRpbmcgVjEgS2V5c3RvcmUuXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBrZXlzdG9yZSBwYXNzd29yZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVYxKGlucHV0LCBwYXNzd29yZCkge1xuICAgICAgICBjb25zdCBqc29uID0gdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyA/IGlucHV0IDogSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChqc29uLlZlcnNpb24gIT09ICcxJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYSBWMSBXYWxsZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5DcnlwdG8uS2V5SGVhZGVyLktkZiAhPT0gJ3NjcnlwdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQga2V5IGRlcml2YXRpb24gc2NoZW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2RmcGFyYW1zID0ganNvbi5DcnlwdG8uS2V5SGVhZGVyLktkZlBhcmFtcztcbiAgICAgICAgY29uc3Qgc2FsdCA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKGpzb24uQ3J5cHRvLlNhbHQpO1xuICAgICAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgc2NyeXB0VjEodXRmOFRvQnl0ZXMocGFzc3dvcmQpLCBzYWx0LCBrZGZwYXJhbXMpO1xuICAgICAgICBjb25zdCBjaXBoZXJ0ZXh0ID0gdW5wcmVmaXhlZEhleFRvQnl0ZXMoanNvbi5DcnlwdG8uQ2lwaGVyVGV4dCk7XG4gICAgICAgIGNvbnN0IG1hYyA9IGtlY2NhazI1Nihjb25jYXRCeXRlcyhkZXJpdmVkS2V5LnN1YmFycmF5KDE2LCAzMiksIGNpcGhlcnRleHQpKTtcbiAgICAgICAgaWYgKGJ5dGVzVG9VbnByZWZpeGVkSGV4KG1hYykgIT09IGpzb24uQ3J5cHRvLk1BQykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdLZXkgZGVyaXZhdGlvbiBmYWlsZWQgLSBwb3NzaWJseSB3cm9uZyBwYXNzcGhyYXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VlZCA9IGF3YWl0IGFlcy5kZWNyeXB0KGNpcGhlcnRleHQsIGtlY2NhazI1NihkZXJpdmVkS2V5LnN1YmFycmF5KDAsIDE2KSkuc3ViYXJyYXkoMCwgMTYpLCB1bnByZWZpeGVkSGV4VG9CeXRlcyhqc29uLkNyeXB0by5JViksICdhZXMtMTI4LWNiYycpO1xuICAgICAgICByZXR1cm4gbmV3IFdhbGxldChzZWVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wb3J0IGEgd2FsbGV0IChWZXJzaW9uIDMgb2YgdGhlIEV0aGVyZXVtIHdhbGxldCBmb3JtYXQpLiBTZXQgYG5vblN0cmljdGAgdHJ1ZSB0byBhY2NlcHQgZmlsZXMgd2l0aCBtaXhlZC1jYXBzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IEEgSlNPTiBzZXJpYWxpemVkIHN0cmluZywgb3IgYW4gb2JqZWN0IHJlcHJlc2VudGluZyBWMyBLZXlzdG9yZS5cbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgVGhlIGtleXN0b3JlIHBhc3N3b3JkLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tVjMoaW5wdXQsIHBhc3N3b3JkLCBub25TdHJpY3QgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBqc29uID0gdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyA/IGlucHV0IDogSlNPTi5wYXJzZShub25TdHJpY3QgPyBpbnB1dC50b0xvd2VyQ2FzZSgpIDogaW5wdXQpO1xuICAgICAgICBpZiAoanNvbi52ZXJzaW9uICE9PSAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIFYzIHdhbGxldCcpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkZXJpdmVkS2V5LCBrZGZwYXJhbXM7XG4gICAgICAgIGlmIChqc29uLmNyeXB0by5rZGYgPT09ICdzY3J5cHQnKSB7XG4gICAgICAgICAgICBrZGZwYXJhbXMgPSBqc29uLmNyeXB0by5rZGZwYXJhbXM7XG4gICAgICAgICAgICAvLyBGSVhNRTogc3VwcG9ydCBwcm9ncmVzcyByZXBvcnRpbmcgY2FsbGJhY2tcbiAgICAgICAgICAgIGRlcml2ZWRLZXkgPSBhd2FpdCBzY3J5cHRWM091dChwYXNzd29yZCwga2RmcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChqc29uLmNyeXB0by5rZGYgPT09ICdwYmtkZjInKSB7XG4gICAgICAgICAgICBrZGZwYXJhbXMgPSBqc29uLmNyeXB0by5rZGZwYXJhbXM7XG4gICAgICAgICAgICBpZiAoa2RmcGFyYW1zLnByZiAhPT0gJ2htYWMtc2hhMjU2Jykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcGFyYW1ldGVycyB0byBQQktERjInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcml2ZWRLZXkgPSBhd2FpdCBwYmtkZjIodXRmOFRvQnl0ZXMocGFzc3dvcmQpLCB1bnByZWZpeGVkSGV4VG9CeXRlcyhrZGZwYXJhbXMuc2FsdCksIGtkZnBhcmFtcy5jLCBrZGZwYXJhbXMuZGtsZW4sICdzaGEyNTYnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQga2V5IGRlcml2YXRpb24gc2NoZW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2lwaGVydGV4dCA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKGpzb24uY3J5cHRvLmNpcGhlcnRleHQpO1xuICAgICAgICBjb25zdCBtYWMgPSBrZWNjYWsyNTYoY29uY2F0Qnl0ZXMoZGVyaXZlZEtleS5zdWJhcnJheSgxNiwgMzIpLCBjaXBoZXJ0ZXh0KSk7XG4gICAgICAgIGlmIChieXRlc1RvVW5wcmVmaXhlZEhleChtYWMpICE9PSBqc29uLmNyeXB0by5tYWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignS2V5IGRlcml2YXRpb24gZmFpbGVkIC0gcG9zc2libHkgd3JvbmcgcGFzc3BocmFzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlZWQgPSBhd2FpdCBhZXMuZGVjcnlwdChjaXBoZXJ0ZXh0LCBkZXJpdmVkS2V5LnN1YmFycmF5KDAsIDE2KSwgdW5wcmVmaXhlZEhleFRvQnl0ZXMoanNvbi5jcnlwdG8uY2lwaGVycGFyYW1zLml2KSwganNvbi5jcnlwdG8uY2lwaGVyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQoc2VlZCk7XG4gICAgfVxuICAgIC8qXG4gICAgICogSW1wb3J0IGFuIEV0aGVyZXVtIFByZSBTYWxlIHdhbGxldC5cbiAgICAgKiBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vcHlldGhzYWxldG9vbC9ibG9iL21hc3Rlci9weWV0aHNhbGV0b29sLnB5XG4gICAgICogSlNPTiBmaWVsZHM6IGVuY3NlZWQsIGV0aGFkZHIsIGJ0Y2FkZHIsIGVtYWlsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBKU09OIHNlcmlhbGl6ZWQgc3RyaW5nLCBvciBhbiBvYmplY3QgcmVwcmVzZW50aW5nIEV0aFNhbGUgS2V5c3RvcmUuXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBrZXlzdG9yZSBwYXNzd29yZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbUV0aFNhbGUoaW5wdXQsIHBhc3N3b3JkKSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSB0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnID8gaW5wdXQgOiBKU09OLnBhcnNlKGlucHV0KTtcbiAgICAgICAgY29uc3QgZW5jc2VlZCA9IHVucHJlZml4ZWRIZXhUb0J5dGVzKGpzb24uZW5jc2VlZCk7XG4gICAgICAgIC8vIGtleSBkZXJpdmF0aW9uXG4gICAgICAgIGNvbnN0IHBhc3MgPSB1dGY4VG9CeXRlcyhwYXNzd29yZCk7XG4gICAgICAgIGNvbnN0IGRlcml2ZWRLZXkgPSAoYXdhaXQgcGJrZGYyKHBhc3MsIHBhc3MsIDIwMDAsIDMyLCAnc2hhMjU2JykpLnN1YmFycmF5KDAsIDE2KTtcbiAgICAgICAgLy8gc2VlZCBkZWNvZGluZyAoSVYgaXMgZmlyc3QgMTYgYnl0ZXMpXG4gICAgICAgIC8vIE5PVEU6IGNyeXB0byAoZGVyaXZlZCBmcm9tIG9wZW5zc2wpIHdoZW4gdXNlZCB3aXRoIGFlcy0qLWNiYyB3aWxsIGhhbmRsZSBQS0NTIzcgcGFkZGluZyBpbnRlcm5hbGx5XG4gICAgICAgIC8vICAgICAgIHNlZSBhbHNvIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNjE0NzcwLzQ5NjQ4MTlcbiAgICAgICAgY29uc3Qgc2VlZCA9IGF3YWl0IGFlcy5kZWNyeXB0KGVuY3NlZWQuc3ViYXJyYXkoMTYpLCBkZXJpdmVkS2V5LCBlbmNzZWVkLnN1YmFycmF5KDAsIDE2KSwgJ2Flcy0xMjgtY2JjJywgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHdhbGxldCA9IG5ldyBXYWxsZXQoa2VjY2FrMjU2KHNlZWQpKTtcbiAgICAgICAgaWYgKGJ5dGVzVG9VbnByZWZpeGVkSGV4KHdhbGxldC5nZXRBZGRyZXNzKCkpICE9PSBqc29uLmV0aGFkZHIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGVjb2RlZCBrZXkgbWlzbWF0Y2ggLSBwb3NzaWJseSB3cm9uZyBwYXNzcGhyYXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdhbGxldDtcbiAgICB9XG4gICAgLy8gcHJpdmF0ZSBnZXR0ZXJzXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgd2FsbGV0J3MgcHVibGljIGtleS5cbiAgICAgKi9cbiAgICBnZXQgcHViS2V5KCkge1xuICAgICAgICBpZiAodGhpcy5wdWJsaWNLZXkgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnB1YmxpY0tleSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5wdWJsaWNLZXkgPSBwcml2YXRlVG9QdWJsaWModGhpcy5wcml2YXRlS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wdWJsaWNLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdhbGxldCdzIHByaXZhdGUga2V5LlxuICAgICAqL1xuICAgIGdldCBwcml2S2V5KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2YXRlS2V5ID09PSB1bmRlZmluZWQgfHwgdGhpcy5wcml2YXRlS2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgaXMgYSBwdWJsaWMga2V5IG9ubHkgd2FsbGV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdmF0ZUtleTtcbiAgICB9XG4gICAgLy8gcHVibGljIGluc3RhbmNlIG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB3YWxsZXQncyBwcml2YXRlIGtleS5cbiAgICAgKlxuICAgICAqL1xuICAgIGdldFByaXZhdGVLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZLZXk7XG4gICAgfVxuICAgIGdldFByaXZhdGVLZXlTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBieXRlc1RvSGV4KHRoaXMucHJpdktleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdhbGxldCdzIHB1YmxpYyBrZXkuXG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wdWJLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdhbGxldCdzIHB1YmxpYyBrZXkgYXMgYSBcIjB4XCIgcHJlZml4ZWQgaGV4IHN0cmluZ1xuICAgICAqL1xuICAgIGdldFB1YmxpY0tleVN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGJ5dGVzVG9IZXgodGhpcy5nZXRQdWJsaWNLZXkoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdhbGxldCdzIGFkZHJlc3MuXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcygpIHtcbiAgICAgICAgcmV0dXJuIHB1YmxpY1RvQWRkcmVzcyh0aGlzLnB1YktleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdhbGxldCdzIGFkZHJlc3MgYXMgYSBcIjB4XCIgcHJlZml4ZWQgaGV4IHN0cmluZ1xuICAgICAqL1xuICAgIGdldEFkZHJlc3NTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBieXRlc1RvSGV4KHRoaXMuZ2V0QWRkcmVzcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgd2FsbGV0J3MgcHJpdmF0ZSBrZXkgYXMgYSBcIjB4XCIgcHJlZml4ZWQgaGV4IHN0cmluZyBjaGVja3N1bW1lZFxuICAgICAqIGFjY29yZGluZyB0byBbRUlQIDU1XShodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvNTUpLlxuICAgICAqL1xuICAgIGdldENoZWNrc3VtQWRkcmVzc1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRvQ2hlY2tzdW1BZGRyZXNzKHRoaXMuZ2V0QWRkcmVzc1N0cmluZygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBFdGhlcmVtIFZlcnNpb24gMyBLZXlzdG9yZSBGb3JtYXQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgd2FsbGV0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIHVzZWQgdG8gZW5jcnlwdCB0aGUgS2V5c3RvcmUuXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG9wdGlvbnMgZm9yIHRoZSBrZXlzdG9yZS4gU2VlIFtpdHMgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL3dpa2kvd2lraS9XZWIzLVNlY3JldC1TdG9yYWdlLURlZmluaXRpb24pIGZvciBtb3JlIGluZm8uXG4gICAgICovXG4gICAgYXN5bmMgdG9WMyhwYXNzd29yZCwgb3B0cykge1xuICAgICAgICBpZiAodGhpcy5wcml2YXRlS2V5ID09PSB1bmRlZmluZWQgfHwgdGhpcy5wcml2YXRlS2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgaXMgYSBwdWJsaWMga2V5IG9ubHkgd2FsbGV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdjNQYXJhbXMgPSBtZXJnZVRvVjNQYXJhbXNXaXRoRGVmYXVsdHMob3B0cyk7XG4gICAgICAgIGxldCBrZGZQYXJhbXM7XG4gICAgICAgIGxldCBkZXJpdmVkS2V5O1xuICAgICAgICBzd2l0Y2ggKHYzUGFyYW1zLmtkZikge1xuICAgICAgICAgICAgY2FzZSBcInBia2RmMlwiIC8qIEtERkZ1bmN0aW9ucy5QQktERiAqLzpcbiAgICAgICAgICAgICAgICBrZGZQYXJhbXMgPSBrZGZQYXJhbXNGb3JQQktERih2M1BhcmFtcyk7XG4gICAgICAgICAgICAgICAgZGVyaXZlZEtleSA9IGF3YWl0IHBia2RmMih1dGY4VG9CeXRlcyhwYXNzd29yZCksIGtkZlBhcmFtcy5zYWx0LCBrZGZQYXJhbXMuYywga2RmUGFyYW1zLmRrbGVuLCAnc2hhMjU2Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2NyeXB0XCIgLyogS0RGRnVuY3Rpb25zLlNjcnlwdCAqLzpcbiAgICAgICAgICAgICAgICBrZGZQYXJhbXMgPSBrZGZQYXJhbXNGb3JTY3J5cHQodjNQYXJhbXMpO1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBzdXBwb3J0IHByb2dyZXNzIHJlcG9ydGluZyBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGRlcml2ZWRLZXkgPSBhd2FpdCBzY3J5cHRWMyhwYXNzd29yZCwga2RmUGFyYW1zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBrZGYnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaXBoZXJ0ZXh0ID0gYXdhaXQgYWVzLmVuY3J5cHQodGhpcy5wcml2S2V5LCBkZXJpdmVkS2V5LnN1YmFycmF5KDAsIDE2KSwgdjNQYXJhbXMuaXYsIHYzUGFyYW1zLmNpcGhlciwgZmFsc2UpO1xuICAgICAgICBjb25zdCBtYWMgPSBrZWNjYWsyNTYoY29uY2F0Qnl0ZXMoZGVyaXZlZEtleS5zdWJhcnJheSgxNiwgMzIpLCBjaXBoZXJ0ZXh0KSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICAgICAgaWQ6IHV1aWR2NCh7IHJhbmRvbTogdjNQYXJhbXMudXVpZCB9KSxcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSB0aGUgb2ZmaWNpYWwgVjMga2V5c3RvcmUgc3BlYyBvbWl0cyB0aGUgYWRkcmVzcyBrZXlcbiAgICAgICAgICAgIGFkZHJlc3M6IGJ5dGVzVG9VbnByZWZpeGVkSGV4KHRoaXMuZ2V0QWRkcmVzcygpKSxcbiAgICAgICAgICAgIGNyeXB0bzoge1xuICAgICAgICAgICAgICAgIGNpcGhlcnRleHQ6IGJ5dGVzVG9VbnByZWZpeGVkSGV4KGNpcGhlcnRleHQpLFxuICAgICAgICAgICAgICAgIGNpcGhlcnBhcmFtczogeyBpdjogYnl0ZXNUb1VucHJlZml4ZWRIZXgodjNQYXJhbXMuaXYpIH0sXG4gICAgICAgICAgICAgICAgY2lwaGVyOiB2M1BhcmFtcy5jaXBoZXIsXG4gICAgICAgICAgICAgICAga2RmOiB2M1BhcmFtcy5rZGYsXG4gICAgICAgICAgICAgICAga2RmcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmtkZlBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgc2FsdDogYnl0ZXNUb1VucHJlZml4ZWRIZXgoa2RmUGFyYW1zLnNhbHQpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWFjOiBieXRlc1RvVW5wcmVmaXhlZEhleChtYWMpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzdWdnZXN0ZWQgZmlsZW5hbWUgZm9yIFYzIGtleXN0b3Jlcy5cbiAgICAgKi9cbiAgICBnZXRWM0ZpbGVuYW1lKHRpbWVzdGFtcCkge1xuICAgICAgICAvKlxuICAgICAgICAgKiBXZSB3YW50IGEgdGltZXN0YW1wIGxpa2UgMjAxNi0wMy0xNVQxNy0xMS0zMy4wMDc1OTgyODhaLiBEYXRlIGZvcm1hdHRpbmdcbiAgICAgICAgICogaXMgYSBwYWluIGluIEphdmFzY3JpcHQsIGV2ZXJib2R5IGtub3dzIHRoYXQuIFdlIGNvdWxkIHVzZSBtb21lbnQuanMsXG4gICAgICAgICAqIGJ1dCBkZWNpZGUgdG8gZG8gaXQgbWFudWFsbHkgaW4gb3JkZXIgdG8gc2F2ZSBzcGFjZS5cbiAgICAgICAgICpcbiAgICAgICAgICogdG9KU09OKCkgcmV0dXJucyBhIHByZXR0eSBjbG9zZSB2ZXJzaW9uLCBzbyBsZXQncyB1c2UgaXQuIEl0IGlzIG5vdCBVVEMgdGhvdWdoLFxuICAgICAgICAgKiBidXQgZG9lcyBpdCByZWFsbHkgbWF0dGVyP1xuICAgICAgICAgKlxuICAgICAgICAgKiBBbHRlcm5hdGl2ZSBtYW51YWwgd2F5IHdpdGggcGFkZGluZyBhbmQgRGF0ZSBmaWVsZHM6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzcyNDQyODgvNDk2NDgxOVxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgdHMgPSB0aW1lc3RhbXAgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHRpbWVzdGFtcCkgOiBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ1VUQy0tJyxcbiAgICAgICAgICAgIHRzLnRvSlNPTigpLnJlcGxhY2UoLzovZywgJy0nKSxcbiAgICAgICAgICAgICctLScsXG4gICAgICAgICAgICBieXRlc1RvVW5wcmVmaXhlZEhleCh0aGlzLmdldEFkZHJlc3MoKSksXG4gICAgICAgIF0uam9pbignJyk7XG4gICAgfVxuICAgIGFzeW5jIHRvVjNTdHJpbmcocGFzc3dvcmQsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGF3YWl0IHRoaXMudG9WMyhwYXNzd29yZCwgb3B0cykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZnkgdGhlIHB1YmxpY0tleSwgcHJpdmF0ZUtleSBwYWlyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHVibGljS2V5IHRoZSBwdWJsaWMga2V5IHRvIHZlcmlmeSBhZ2FpbnN0IHRoZSBwcml2YXRlIGtleSBvZiB0aGUgd2FsbGV0XG4gICAgICovXG4gICAgdmVyaWZ5UHVibGljS2V5KHB1YmxpY0tleSkge1xuICAgICAgICBpZiAodGhpcy5wcml2YXRlS2V5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcXVhbHNCeXRlcyhwcml2YXRlVG9QdWJsaWModGhpcy5wcml2YXRlS2V5KSwgcHVibGljS2V5KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13YWxsZXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../../node_modules/.pnpm/@ethereumjs+wallet@2.0.4/node_modules/@ethereumjs/wallet/dist/esm/wallet.js\n");

/***/ })

};
;